function viewPdf() {
    document.getElementById('mainMenu').style.display = 'none';
    document.getElementById('pdfContainer').style.display = 'block';

    // 로딩 오버레이 표시 (초기 로드 시에만)
    document.getElementById('loadingOverlay').style.display = 'flex';

    const url = 'abcbook.pdf'; // PDF 파일 경로

    // PDF 파일 로드
    pdfjsLib.getDocument(url).promise.then(function(pdfDoc_) {
        pdfDoc = pdfDoc_;
        renderPage(pageNum);
    }).catch(function(error) {
        alert('PDF 파일을 로드하는 중 오류가 발생했습니다: ' + error.message);
        document.getElementById('mainMenu').style.display = 'block';
        document.getElementById('pdfContainer').style.display = 'none';
        // 로딩 오버레이 숨기기
        document.getElementById('loadingOverlay').style.display = 'none';
    });
}

// 페이지 렌더링 함수
function renderPage(num) {
    pageRendering = true;

    // 페이지 가져오기
    pdfDoc.getPage(num).then(function(page) {
        const scale = 1.0; // 스케일 조정하여 크기 감소
        const viewport = page.getViewport({ scale: scale });
        const canvas = document.getElementById('pdfCanvas');
        const ctx = canvas.getContext('2d');
        canvas.height = viewport.height;
        canvas.width = viewport.width;

        // 페이지 렌더링
        const renderContext = {
            canvasContext: ctx,
            viewport: viewport
        };
        const renderTask = page.render(renderContext);

        // 페이지 렌더링이 완료되면 처리
        renderTask.promise.then(function() {
            pageRendering = false;

            if (pageNumPending !== null) {
                renderPage(pageNumPending);
                pageNumPending = null;
            }

            // 첫 페이지 렌더링 완료 시 로딩 오버레이 숨기기
            if (num === 1) {
                document.getElementById('loadingOverlay').style.display = 'none';
            }
        });
    });
}

// 이전 페이지 버튼 클릭
function prevPage() {
    if (pageNum <= 1) {
        return;
    }
    pageNum--;
    // 페이지 네비게이션 시 로딩 오버레이 표시하지 않음
    renderPage(pageNum);
}

// 다음 페이지 버튼 클릭
function nextPage() {
    if (pageNum >= pdfDoc.numPages) {
        return;
    }
    pageNum++;
    // 페이지 네비게이션 시 로딩 오버레이 표시하지 않음
    renderPage(pageNum);
}

// 페이지 번호 입력 후 이동
function goToPage() {
    const pageNumberInput = document.getElementById('pageNumberInput').value;
    const pageNumber = parseInt(pageNumberInput, 10);
    if (pageNumber > 0 && pageNumber <= pdfDoc.numPages) {
        pageNum = pageNumber;
        // 페이지 네비게이션 시 로딩 오버레이 표시하지 않음
        renderPage(pageNum);
    } else {
        alert('유효한 페이지 번호를 입력하세요.');
    }
}
